<Window x:Class="FileManagerUIWpf.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:FileManagerUIWpf.ViewModel"
        Title="文件管理器" Height="600" Width="800">

	<Window.DataContext>
		<vm:MainViewModel />
	</Window.DataContext>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- 导航栏 -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
			<Button Content="←" Command="{Binding GoBackCommand}" 
                    Width="30" Margin="0,0,5,0"/>
			<Button Content="→" Command="{Binding GoForwardCommand}" 
                    Width="30" Margin="0,0,5,0"/>
			<TextBox Text="{Binding CurrentPath}" Width="300"
                     KeyDown="OnAddressBarKeyDown"/>
		</StackPanel>

		<!-- 文件列表 -->
		<ListView Grid.Row="1" ItemsSource="{Binding Items}" 
                  MouseDoubleClick="ListView_MouseDoubleClick">
			<ListView.View>
				<GridView>
					<GridViewColumn Header="名称" Width="200">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image Source="{Binding Type, Converter={StaticResource TypeToIconConverter}}" 
                                           Width="16" Margin="0,0,5,0"/>
									<TextBlock Text="{Binding Name}"/>
								</StackPanel>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn Header="类型" DisplayMemberBinding="{Binding Type}" Width="100"/>
					<GridViewColumn Header="修改日期" DisplayMemberBinding="{Binding LastModified}" Width="150"/>
					<GridViewColumn Header="大小" DisplayMemberBinding="{Binding Size, StringFormat={}{0} KB}" Width="80"/>
				</GridView>
			</ListView.View>
		</ListView>

		<!-- 加载指示器 -->
		<Border Grid.Row="1" Background="#80000000" Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibility}}">
			<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
				<ProgressBar IsIndeterminate="True" Width="200" Height="20"/>
				<TextBlock Text="加载中..." Foreground="White" Margin="0,10,0,0"/>
			</StackPanel>
		</Border>
	</Grid>
</Window>